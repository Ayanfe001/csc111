<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSC111 QUIZ | HoRly’sTech</title>
    <style>
        :root { --primary: #00264d; --gold: #ff9900; --bg: #f0f2f5; --white: #fff; --danger: #e74c3c; --success: #27ae60; }
        body { background: var(--bg); font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; justify-content: center; height: 100vh; overflow: hidden; }
        #app { width: 100%; max-width: 550px; background: var(--white); height: 100vh; display: flex; flex-direction: column; box-shadow: 0 0 30px rgba(0,0,0,0.1); position: relative; }
        header { background: var(--primary); color: var(--white); padding: 12px; text-align: center; font-size: 0.75rem; border-bottom: 4px solid var(--gold); text-transform: uppercase; }
        .timer { background: #111; color: var(--gold); padding: 10px; text-align: center; font-family: monospace; font-size: 1.5rem; font-weight: 900; }
        .screen { display: none; padding: 20px; flex: 1; overflow-y: auto; animation: slide 0.3s ease; }
        .active { display: flex; flex-direction: column; }
        @keyframes slide { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }
        input { width: 100%; padding: 15px; margin-bottom: 20px; border: 2px solid #ddd; border-radius: 10px; font-size: 1rem; box-sizing: border-box; }
        .q-text { font-size: 1.15rem; font-weight: 600; margin-bottom: 20px; line-height: 1.5; }
        .opt-btn { background: #fff; border: 2px solid #eee; padding: 14px; border-radius: 10px; cursor: pointer; display: flex; align-items: center; margin-bottom: 12px; transition: 0.2s; }
        .opt-btn.selected { border-color: var(--primary); background: #eef5ff; }
        .opt-letter { background: var(--primary); color: white; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; border-radius: 50%; margin-right: 12px; font-weight: 800; }
        .bottom-nav { padding: 15px; background: #f8f9fa; border-top: 1px solid #ddd; display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; }
        .nav-btn { padding: 12px 5px; border: none; border-radius: 8px; font-weight: 700; cursor: pointer; font-size: 0.75rem; color: white; text-transform: uppercase; }
        .main-btn { background: var(--gold); color: #000; border: none; padding: 15px; border-radius: 10px; width: 100%; font-weight: 800; cursor: pointer; }
        table { width: 100%; border-collapse: collapse; font-size: 0.8rem; }
        th, td { padding: 10px; border: 1px solid #ddd; text-align: left; }
        .card { background: var(--primary); color: white; padding: 25px; border-radius: 12px; text-align: center; margin-bottom: 20px; }
        .res-item { padding: 15px; border-bottom: 1px solid #eee; font-size: 0.9rem; }
        .correct { color: var(--success); font-weight: bold; }
        .wrong { color: var(--danger); font-weight: bold; }
        #modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: none; justify-content: center; align-items: center; z-index: 1000; }
        .modal-box { background: white; padding: 25px; border-radius: 15px; width: 85%; text-align: center; }
    </style>
</head>
<body>

<div id="app">
    <header>CSC111 100 questions generated by HoRly’s_Tech gadgets Sales N repair… /09121213936</header>
    <div id="timerDisplay" class="timer" style="display: none;">15:00</div>

    <div id="login-screen" class="screen active">
        <div style="margin: auto; width: 100%; text-align: center;">
            <h2>CSC111 15-minutes Quiz</h2>
            <p>welcome, pls provide your details</p>
            <input type="text" id="studentName" placeholder="Enter Your Name">
            <button class="main-btn" onclick="startQuiz()">LOGIN & START QUIZ</button>
            <p onclick="showAdminLogin()" style="margin-top: 40px; font-size: 0.7rem; color: #ccc; cursor: pointer;">Admin Dashboard</p>
        </div>
    </div>

    <div id="admin-login-screen" class="screen">
        <div style="margin: auto; width: 100%;">
            <h3>Admin Access</h3>
            <input type="password" id="adminPass" placeholder="Enter Password">
            <button class="main-btn" onclick="verifyAdmin()">LOGIN</button>
            <button class="nav-btn" style="background:#6c757d; margin-top:10px; width:100%" onclick="showScreen('login-screen')">BACK</button>
        </div>
    </div>

    <div id="admin-panel-screen" class="screen">
        <div style="display:flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
            <h3>Candidates Scores <span id="liveStatus" style="color:var(--success); font-size:0.6rem;">● LIVE</span></h3>
            <div>
                <button onclick="downloadCSV()" style="background:var(--success); border:none; color:#fff; padding:5px; border-radius:4px; font-size:0.7rem;">Excel</button>
                <button onclick="clearLogs()" style="background:var(--danger); border:none; color:#fff; padding:5px; border-radius:4px; font-size:0.7rem;">Clear</button>
            </div>
        </div>
        <div style="overflow-x: auto;">
            <table><thead><tr><th>Name</th><th>Score</th><th>Date</th></tr></thead><tbody id="adminTable"></tbody></table>
        </div>
        <button class="main-btn" style="margin-top: 20px;" onclick="exitAdmin()">EXIT DASHBOARD</button>
    </div>

    <div id="quiz-screen" class="screen">
        <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 0.8rem; margin-bottom: 10px; color: var(--primary);">
            <span>Q: <span id="qNum">1</span> / 100</span>
            <span id="answeredCount">0 Answered</span>
        </div>
        <div id="qText" class="q-text"></div>
        <div id="options"></div>
        <div class="bottom-nav">
            <button class="nav-btn" style="background:#6c757d" onclick="prevQ()">PREV</button>
            <button class="nav-btn" style="background:var(--primary)" onclick="nextQ()">NEXT/SKIP</button>
            <button class="nav-btn" style="background:var(--danger)" onclick="toggleModal(true)">SUBMIT</button>
        </div>
    </div>

    <div id="result-screen" class="screen">
        <div class="card"><h1 id="finalScore" style="font-size: 3rem; margin: 0;"></h1><p id="resCandidate" style="font-weight: bold;"></p></div>
        <h3>Review Correction</h3>
        <div id="resultsList"></div>
        <button class="main-btn" onclick="location.reload()" style="margin-top:20px">LOGOUT</button>
    </div>

    <div id="modal"><div class="modal-box"><h3>Submit Quiz? click yes to continue</h3><div style="display:flex; gap:10px; margin-top:15px;"><button class="nav-btn" style="background:#6c757d; flex:1" onclick="toggleModal(false)">NO</button><button class="nav-btn" style="background:var(--danger); flex:1" onclick="endExam()">YES</button></div></div></div>
</div>

<script>
    const BACKEND_URL = "https://csc-backend-v4na.onrender.com"; 
    const quizData = [
        { q: "A DBMS is a collection of ________.", a: ["Programs only", "Interrelated data only", "Interrelated data and programs", "Files only"], c: 2 },
        { q: "The primary goal of a DBMS is to provide ________.", a: ["Fast computers", "Secure hardware", "Convenient and efficient data storage and retrieval", "Cheap storage"], c: 2 },
        { q: "Information is transformed from data mainly through ________.", a: ["Hardware", "DBMS", "Compiler", "Operating system"], c: 1 },
        { q: "The word “data” comes from the word ________.", a: ["Date", "Database", "Datum", "Detail"], c: 2 },
        { q: "Data is considered ________.", a: ["Meaningless", "Interchangeable", "Fixed", "Permanent"], c: 1 },
        { q: "A database is an ________ collection of data.", a: ["Random", "Unorganized", "Organized", "Temporary"], c: 2 },
        { q: "Which of the following is NOT a database?", a: ["MySQL", "Oracle", "MongoDB", "MS Word"], c: 3 },
        { q: "File processing systems suffer from ________.", a: ["Data independence", "Data redundancy", "High security", "Better performance"], c: 1 },
        { q: "Data redundancy leads to ________.", a: ["Data integrity", "Data inconsistency", "Data independence", "Data security"], c: 1 },
        { q: "Difficulty in accessing data is a problem of ________.", a: ["DBMS", "Database", "File system", "SQL"], c: 2 },
        { q: "When data is scattered in different files, it is called ________.", a: ["Data abstraction", "Data isolation", "Data integrity", "Metadata"], c: 1 },
        { q: "Atomicity problems occur due to ________.", a: ["User errors", "Incomplete transactions", "Hardware upgrades", "Backup systems"], c: 1 },
        { q: "Concurrent-access anomalies occur when ________.", a: ["One user accesses data", "Many users update data simultaneously", "Data is read-only", "Data is encrypted"], c: 1 },
        { q: "Security is difficult to enforce in ________.", a: ["DBMS", "Database", "File system", "SQL"], c: 2 },
        { q: "Integrity constraints are enforced by ________.", a: ["Users", "Programs", "Hardware", "Compiler"], c: 1 },
        { q: "Data processed to be useful is called ________.", a: ["Metadata", "Information", "Knowledge", "Database"], c: 1 },
        { q: "Data that describes data is called ________.", a: ["Information", "Metadata", "Schema", "Instance"], c: 1 },
        { q: "A key is used to ________.", a: ["Store data", "Encrypt data", "Uniquely identify records", "Delete data"], c: 2 },
        { q: "A database system consists of ________.", a: ["Hardware only", "Software only", "Data only", "Hardware, software, people, and data"], c: 3 },
        { q: "DBMS software helps in ________.", a: ["Playing media", "Data management", "Web browsing", "File compression"], c: 1 },
        { q: "The self-describing nature of DBMS uses ________.", a: ["SQL", "Tables", "Metadata", "Index"], c: 2 },
        { q: "Program-data independence means ________.", a: ["Programs depend on data", "Data depends on programs", "Programs and data are independent", "No programs are used"], c: 2 },
        { q: "Data abstraction hides ________.", a: ["User interfaces", "Storage details", "Data values", "Programs"], c: 1 },
        { q: "Multiple views of data allow ________.", a: ["One user view", "Same data for all users", "Different user perspectives", "No user access"], c: 2 },
        { q: "Concurrency control ensures ________.", a: ["Faster computers", "Correct transaction execution", "Data duplication", "More users"], c: 1 },
        { q: "NTFS is an example of ________.", a: ["DBMS", "File system", "Database", "Query language"], c: 1 },
        { q: "SQL is used in ________.", a: ["File systems", "DBMS", "Operating systems", "Hardware"], c: 1 },
        { q: "DBMS provides ________ security than file system.", a: ["Less", "Equal", "More", "No"], c: 2 },
        { q: "Data consistency in DBMS is ________.", a: ["Low", "Medium", "High", "Absent"], c: 2 },
        { q: "Crash recovery is supported by ________.", a: ["File system", "DBMS", "Compiler", "Editor"], c: 1 },
        { q: "Airlines use DBMS mainly for ________.", a: ["Music", "Ticket booking", "Gaming", "Chatting"], c: 1 },
        { q: "DBMS is used in ________.", a: ["Banking", "Education", "Healthcare", "All of the above"], c: 3 },
        { q: "Facebook stores ________.", a: ["Small data", "No data", "Large databases", "Temporary data"], c: 2 },
        { q: "Wikipedia is an example of ________.", a: ["Small database", "Very large database", "File system", "OS"], c: 1 },
        { q: "E-commerce websites depend heavily on ________.", a: ["Hardware", "DBMS", "Compiler", "Browser"], c: 1 },
        { q: "Naive users ________.", a: ["Write SQL", "Design databases", "Use applications without DBMS knowledge", "Maintain servers"], c: 2 },
        { q: "Railway ticket users are ________.", a: ["Sophisticated users", "Naive users", "Database designers", "DBAs"], c: 1 },
        { q: "System analysts mainly ________.", a: ["Write code", "Design hardware", "Analyze user requirements", "Backup databases"], c: 2 },
        { q: "Sophisticated users interact with DBMS using ________.", a: ["Hardware", "SQL queries", "File systems", "Backup tools"], c: 1 },
        { q: "Database designers design ________.", a: ["Queries only", "Tables and relationships", "Hardware", "Operating systems"], c: 1 },
        { q: "DBA controls ________ levels of database.", a: ["One", "Two", "Three", "Four"], c: 2 },
        { q: "DBA provides ________.", a: ["Security", "Backup", "Recovery", "All of the above"], c: 3 },
        { q: "DBA account is also called ________.", a: ["Guest account", "Normal user", "Superuser account", "Temporary account"], c: 2 },
        { q: "Repairing database damage is the duty of ________.", a: ["End user", "Programmer", "DBA", "Analyst"], c: 2 },
        { q: "Creating user accounts is done by ________.", a: ["Naive users", "DBA", "Designers", "Casual users"], c: 1 },
        { q: "1-tier architecture has ________.", a: ["Client only", "Server only", "Client, server, database on same machine", "Separate machines"], c: 2 },
        { q: "1-tier architecture is mostly used for ________.", a: ["Large web apps", "Learning purposes", "Banking", "Telecom"], c: 1 },
        { q: "2-tier architecture follows ________.", a: ["Peer-to-peer", "Client-server", "Centralized", "Distributed"], c: 1 },
        { q: "ODBC and JDBC are used in ________.", a: ["1-tier", "2-tier", "3-tier", "File system"], c: 1 },
        { q: "3-tier architecture includes ________ layers.", a: ["Two", "Three", "Four", "Five"], c: 1 },
        { q: "The middle layer in 3-tier architecture is called ________.", a: ["Client", "Database", "Application server", "Storage"], c: 2 },
        { q: "3-tier architecture improves ________.", a: ["Data loss", "Security", "Redundancy", "Inconsistency"], c: 1 },
        { q: "Direct client-server interaction is avoided in ________.", a: ["1-tier", "2-tier", "3-tier", "File system"], c: 2 },
        { q: "3-tier architecture is used in ________.", a: ["Small projects", "Large web applications", "File storage", "Desktop apps"], c: 1 },
        { q: "A disadvantage of 3-tier architecture is ________.", a: ["Low security", "High redundancy", "Complexity", "No scalability"], c: 2 },
        { q: "Data modeling shows ________.", a: ["Hardware connections", "Data relationships", "Software bugs", "Network speed"], c: 1 },
        { q: "The relational model represents data in ________.", a: ["Files", "Objects", "Tables", "Trees"], c: 2 },
        { q: "Relational model was proposed by ________.", a: ["Peter Chen", "Edgar F. Codd", "Bill Gates", "James Gosling"], c: 1 },
        { q: "ER model was designed by ________.", a: ["Codd", "Chen", "Oracle", "IBM"], c: 1 },
        { q: "An entity is a ________.", a: ["Program", "Data object", "Query", "File"], c: 1 },
        { q: "Attributes describe ________.", a: ["Relationships", "Entities", "Tables", "Files"], c: 1 },
        { q: "Object-based model combines ________.", a: ["File and DBMS", "ER and relational models", "Hardware and software", "SQL and XML"], c: 1 },
        { q: "XML is used in ________ data model.", a: ["Relational", "ER", "Object-based", "Semi-structured"], c: 3 },
        { q: "Semi-structured data allows ________.", a: ["Fixed attributes", "No attributes", "Different attributes for same data type", "Only numeric data"], c: 2 },
        { q: "Data modeling reduces ________.", a: ["Errors", "Storage", "Users", "Hardware"], c: 0 },
        { q: "Database schema represents ________.", a: ["Physical storage only", "Logical structure", "Data values", "Backup files"], c: 1 },
        { q: "Schema is designed by ________.", a: ["End users", "Database designers", "Naive users", "Clerks"], c: 1 },
        { q: "Physical schema defines ________.", a: ["Tables", "Views", "Storage details", "Constraints"], c: 2 },
        { q: "Logical schema defines ________.", a: ["Disk location", "Hardware", "Tables and constraints", "Files"], c: 2 },
        { q: "A database instance is ________.", a: ["Permanent", "Static", "Snapshot at a given time", "Schema"], c: 2 },
        { q: "Data independence means ________.", a: ["Data is deleted", "Data is hidden", "Changes without affecting other levels", "No data"], c: 2 },
        { q: "Logical data independence deals with ________.", a: ["Storage devices", "Table structure", "Hardware", "Disk blocks"], c: 1 },
        { q: "Physical data independence deals with ________.", a: ["Table format", "Schema", "Storage changes", "Queries"], c: 2 },
        { q: "Replacing HDD with SSD affects ________.", a: ["Logical data", "Schema", "Physical data only", "Users"], c: 2 },
        { q: "Metadata helps to ________.", a: ["Delete data", "Locate and retrieve data", "Encrypt data", "Print data"], c: 1 },
        { q: "DBMS converts data into ________.", a: ["Files", "Information", "Tables", "Hardware"], c: 1 },
        { q: "A relation in DBMS is a ________.", a: ["File", "Table", "Program", "Schema"], c: 1 },
        { q: "Rows in a table are also called ________.", a: ["Fields", "Attributes", "Tuples", "Keys"], c: 2 },
        { q: "Columns in a table are ________.", a: ["Records", "Fields", "Instances", "Files"], c: 1 },
        { q: "A primary key must be ________.", a: ["Duplicate", "Null", "Unique", "Optional"], c: 2 },
        { q: "DBMS improves ________.", a: ["Redundancy", "Inconsistency", "Data sharing", "Data loss"], c: 2 },
        { q: "Backup is used to prevent ________.", a: ["Access", "Redundancy", "Data loss", "Query"], c: 2 },
        { q: "Integrity constraints ensure ________.", a: ["Wrong data", "Valid data", "No data", "Duplicate data"], c: 1 },
        { q: "SQL stands for ________.", a: ["Simple Query Language", "Structured Query Language", "System Query Language", "Sequential Query Language"], c: 1 },
        { q: "DBMS reduces ________.", a: ["Data sharing", "Data security", "Data redundancy", "Data access"], c: 2 },
        { q: "Casual users access database ________.", a: ["Frequently", "Occasionally", "Never", "Daily"], c: 1 },
        { q: "A database with tables, views, and triggers is part of ________.", a: ["Hardware", "Logical schema", "Physical schema", "Metadata"], c: 1 },
        { q: "DBMS supports ________ transactions.", a: ["Single-user", "Multi-user", "No-user", "Offline"], c: 1 },
        { q: "The ER model is mainly used for ________.", a: ["Programming", "Database design", "Storage", "Backup"], c: 1 },
        { q: "Constraints are used to ensure ________.", a: ["Redundancy", "Security", "Integrity", "Speed"], c: 2 },
        { q: "Indexing improves ________.", a: ["Storage", "Query performance", "Redundancy", "Errors"], c: 1 },
        { q: "DBMS is more expensive than ________.", a: ["OS", "File system", "Browser", "Editor"], c: 1 },
        { q: "A database without redundancy is ________.", a: ["Normalized", "Isolated", "Corrupted", "Redundant"], c: 0 },
        { q: "The lowest level of abstraction is ________.", a: ["View level", "Logical level", "Physical level", "Schema level"], c: 2 },
        { q: "The highest level of abstraction is ________.", a: ["Physical", "Logical", "View", "Storage"], c: 2 },
        { q: "DBMS supports data ________.", a: ["Loss", "Sharing", "Duplication", "Hiding"], c: 1 },
        { q: "Tables are also known as ________.", a: ["Files", "Relations", "Records", "Fields"], c: 1 },
        { q: "A relationship set connects ________.", a: ["Files", "Attributes", "Entities", "Schemas"], c: 2 },
        { q: "Database lifecycle includes ________.", a: ["Design only", "Implementation only", "Design, implementation, maintenance", "Storage only"], c: 2 },
        { q: "DBMS is essential because programming languages cannot store data ________.", a: ["Temporarily", "Securely", "Permanently", "Logically"], c: 2 }
    ];

    let currentIdx = 0, studentAns = new Array(100).fill(null), timeLeft = 15 * 60, timerId, adminInterval;

    function showScreen(id) { document.querySelectorAll('.screen').forEach(s => s.classList.remove('active')); document.getElementById(id).classList.add('active'); }
    function startQuiz() { if(!document.getElementById('studentName').value) return alert("Enter name."); showScreen('quiz-screen'); document.getElementById('timerDisplay').style.display = 'block'; timerId = setInterval(tick, 1000); renderQ(); }
    function tick() { timeLeft--; let m = Math.floor(timeLeft/60), s = timeLeft%60; document.getElementById('timerDisplay').innerText = `${m}:${s<10?'0':''}${s}`; if(timeLeft <= 0) endExam(); }
    function renderQ() { const data = quizData[currentIdx]; document.getElementById('qNum').innerText = currentIdx+1; document.getElementById('qText').innerText = data.q; const optCont = document.getElementById('options'); optCont.innerHTML = ''; data.a.forEach((opt, i) => { const btn = document.createElement('div'); btn.className = `opt-btn ${studentAns[currentIdx] === i ? 'selected' : ''}`; btn.innerHTML = `<span class="opt-letter">${String.fromCharCode(65+i)}</span> ${opt}`; btn.onclick = () => { studentAns[currentIdx] = i; updateStats(); renderQ(); }; optCont.appendChild(btn); }); }
    function updateStats() { document.getElementById('answeredCount').innerText = `${studentAns.filter(a => a !== null).length} Answered`; }
    function nextQ() { if(currentIdx < 99) { currentIdx++; renderQ(); } }
    function prevQ() { if(currentIdx > 0) { currentIdx--; renderQ(); } }
    function toggleModal(s) { document.getElementById('modal').style.display = s ? 'flex' : 'none'; }

    async function endExam() {
        clearInterval(timerId); toggleModal(false); showScreen('result-screen'); document.getElementById('timerDisplay').style.display = 'none';
        let score = 0; const list = document.getElementById('resultsList'); list.innerHTML = '';
        quizData.forEach((q, i) => {
            const user = studentAns[i]; if(user === q.c) score++;
            list.innerHTML += `<div class="res-item"><strong>${i+1}. ${q.q}</strong><br>Your Answer: <span class="${user===q.c?'correct':'wrong'}">${user!==null?q.a[user]:'No Answer'}</span><br>Correct: <span class="correct">${q.a[q.c]}</span></div>`;
        });
        const name = document.getElementById('studentName').value;
        document.getElementById('finalScore').innerText = `${score} / 100`;
        document.getElementById('resCandidate').innerText = "CANDIDATE: " + name;
        await fetch(`${BACKEND_URL}/api/save-score`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ name: name, score: score }) });
    }

    function showAdminLogin() { showScreen('admin-login-screen'); }
    function verifyAdmin() { 
        if(document.getElementById('adminPass').value === "miracle@3") { 
            showScreen('admin-panel-screen'); 
            loadAdminTable(); 
            adminInterval = setInterval(loadAdminTable, 10000); 
        } else alert("Access Denied!"); 
    }
    function exitAdmin() { clearInterval(adminInterval); showScreen('login-screen'); }
    function loadAdminTable() {
        fetch(`${BACKEND_URL}/api/admin/results`).then(res => res.json()).then(data => {
            const body = document.getElementById('adminTable'); body.innerHTML = '';
            data.forEach(r => { body.innerHTML += `<tr><td>${r.name}</td><td>${r.score}</td><td>${r.date}</td></tr>`; });
        });
    }
    async function clearLogs() {
        if(confirm("Clear Record?")) { 
            await fetch(`${BACKEND_URL}/api/admin/clear-results`, { method: 'DELETE' }); 
            loadAdminTable(); 
        }
    }
    function downloadCSV() {
        fetch(`${BACKEND_URL}/api/admin/results`).then(res => res.json()).then(data => {
            let csv = "Name,Score,Date\n";
            data.forEach(r => { csv += `${r.name},${r.score},${r.date}\n`; });
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a'); a.href = url; a.download = "csc_results.csv"; a.click();
        });
    }
</script>
</body>
</html>